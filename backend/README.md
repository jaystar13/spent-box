# í”„ë¡œì íŠ¸ ì‹¤í–‰ ê°€ì´ë“œ

ì´ í”„ë¡œì íŠ¸ëŠ” Dockerì™€ PostgreSQLì„ ê¸°ë°˜ìœ¼ë¡œ ê°œë°œ ë° í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ êµ¬ì„±í•©ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ Alembicì„ ì‚¬ìš©í•˜ë©°, í…ŒìŠ¤íŠ¸ëŠ” pytestë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤.

---

## âœ… ì‹¤í–‰ ìˆœì„œ

### 1. ë„ì»¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰

```
docker-compose up -d
```

> PostgreSQL ë“± ì¢…ì† ì„œë¹„ìŠ¤ê°€ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

### 2. Alembic Revision íŒŒì¼ ìƒì„±

```
alembic revision --autogenerate -m "create tables"
```

> ëª¨ë¸ì´ ì •ì˜ëœ í›„ì— ì‹¤í–‰í•´ì•¼ í•˜ë©°, ìë™ìœ¼ë¡œ ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì€ ë°˜ë“œì‹œ ê²€í†  í›„ ì ìš©í•˜ì„¸ìš”.

---

### 3. Revision íŒŒì¼ í™•ì¸ ë° ìˆ˜ì •

`alembic/versions/` ë””ë ‰í† ë¦¬ ì•„ë˜ ìƒì„±ëœ íŒŒì¼ì„ ì—´ì–´ ë³€ê²½ ì‚¬í•­ì„ í™•ì¸í•˜ê³ , í•„ìš”ì‹œ ìˆ˜ì •í•©ë‹ˆë‹¤.

---

### 4. ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš© (í…Œì´ë¸” ìƒì„±)

```
alembic upgrade head
```

> ìµœì‹  revisionê¹Œì§€ ë°ì´í„°ë² ì´ìŠ¤ì— ì ìš©ë©ë‹ˆë‹¤.

---

### 5. í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```
PYTHONPATH=. pytest app/tests/api/routes/test_users.py
```

> ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ import ê²½ë¡œì— í¬í•¨ì‹œì¼œ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆë“¤ì´ ì •ìƒì ìœ¼ë¡œ ë¡œë”©ë˜ë„ë¡ í•©ë‹ˆë‹¤.

---

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡° ì˜ˆì‹œ

```
project-root/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ tests/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ alembic/
â”‚   â”œâ”€â”€ versions/
â”‚   â””â”€â”€ env.py
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ alembic.ini
â”œâ”€â”€ README.md
â””â”€â”€ ...
```

---

## ğŸ”§ í•„ìš” íŒ¨í‚¤ì§€ (ì˜ˆì‹œ)

- SQLAlchemy
- Alembic
- psycopg2-binary
- pytest

> íŒ¨í‚¤ì§€ ì„¤ì¹˜ëŠ” `requirements.txt` ë˜ëŠ” `pyproject.toml`ì„ ì´ìš©í•˜ì„¸ìš”.

---

## ğŸ’¬ ì°¸ê³ 

- Alembic ì„¤ì •: `alembic/env.py`ì—ì„œ `target_metadata` ì„¤ì •ì´ ì˜¬ë°”ë¥´ê²Œ ë˜ì–´ ìˆì–´ì•¼ `--autogenerate`ê°€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.
- PostgreSQLì€ docker-compose ë‚´ì—ì„œ `db`ë¼ëŠ” ì„œë¹„ìŠ¤ëª…ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤ (`host: db`, `port: 5432` ë“±).
